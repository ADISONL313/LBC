<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cqcskj.lbc.mapper.VolunteerMapper">
    <resultMap id="idleVolunteerResultMap" type="java.util.Map">
        <!-- user 表字段 -->
        <result property="mail" column="mail"/>
        <result property="realName" column="real_name"/>
        <result property="phoneNumber" column="phone_number"/>
        <result property="gender" column="gender"/>
        <result property="idCard" column="id_card"/>
        <result property="contactAddress" column="contact_address"/>

        <!-- volunteer 表字段 -->
        <result property="volunteerId" column="volunteer_id"/>
        <result property="state" column="state"/>
        <result property="userRole" column="user_role"/> <!-- 添加 userRole 的映射 -->
    </resultMap>

    <select id="getIdleVolunteerMapper" resultMap="idleVolunteerResultMap">
        SELECT
        u.mail,
        u.real_name , <!-- 为 real_name 字段添加别名 -->
        u.phone_number,
        u.gender,
        u.id_card,
        u.contact_address,
        v.volunteer_id,
        v.state,
        u.user_role
        FROM
        user u
        JOIN
        volunteer v ON u.mail = v.mail
        WHERE
        v.state = 0 and u.user_role = 2
    </select>
</mapper>